<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:黑体;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:楷体;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:微软雅黑;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:仿宋_GB2312;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:幼圆;
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:"\@微软雅黑";}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@楷体";}
@font-face
	{font-family:"\@黑体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@幼圆";}
@font-face
	{font-family:"\@Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"\@仿宋_GB2312";}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
h1
	{mso-style-link:"标题 1 字符";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	line-height:240%;
	page-break-after:avoid;
	font-size:22.0pt;
	font-family:"Calibri",sans-serif;
	font-weight:bold;}
h2
	{mso-style-link:"标题 2 字符";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:1.0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-1.0cm;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Helvetica",sans-serif;
	font-weight:bold;}
h3
	{mso-style-link:"标题 3 字符";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:35.45pt;
	text-indent:-35.45pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Times New Roman",serif;
	font-weight:bold;}
h4
	{mso-style-link:"标题 4 字符";
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:42.55pt;
	text-indent:-42.55pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Helvetica",sans-serif;
	font-weight:bold;}
h5
	{mso-style-link:"标题 5 字符";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:49.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-49.6pt;
	line-height:150%;
	font-size:14.0pt;
	font-family:"Calibri",sans-serif;
	font-weight:bold;}
h6
	{mso-style-link:"标题 6 字符";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:2.0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-2.0cm;
	line-height:132%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;
	font-weight:bold;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"微软雅黑",sans-serif;
	text-transform:uppercase;
	font-weight:bold;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:12.0pt;
	font-size:10.0pt;
	font-family:"微软雅黑",sans-serif;
	font-variant:small-caps;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin:0cm;
	text-indent:21.0pt;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
p.A, li.A, div.A
	{mso-style-name:"正文 A";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:7.8pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
p.1, li.1, div.1
	{mso-style-name:副标题1;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.5pt;
	margin-left:0cm;
	text-align:right;
	font-size:18.0pt;
	font-family:"微软雅黑",sans-serif;
	color:#4F81BD;
	text-transform:uppercase;}
span.2
	{mso-style-name:"标题 2 字符";
	mso-style-link:"标题 2";
	font-family:"Helvetica",sans-serif;
	font-weight:bold;}
p.COR-, li.COR-, div.COR-
	{mso-style-name:COR-代码;
	mso-style-link:"COR-代码 Char";
	margin-top:7.8pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:12.0pt;
	background:#E6E6E6;
	word-break:break-all;
	font-size:10.5pt;
	font-family:"Courier New";}
span.COR-Char
	{mso-style-name:"COR-代码 Char";
	mso-style-link:COR-代码;
	font-family:"Courier New";
	background:#E6E6E6;}
span.10
	{mso-style-name:"标题 1 字符";
	mso-style-link:"标题 1";
	font-family:"Calibri",sans-serif;
	font-weight:bold;}
p.COR-0, li.COR-0, div.COR-0
	{mso-style-name:COR-注意;
	mso-style-link:"COR-注意 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:42.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	word-break:break-all;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
span.COR-Char0
	{mso-style-name:"COR-注意 Char";
	mso-style-link:COR-注意;
	font-family:"Arial",sans-serif;}
.MsoChpDefault
	{font-size:10.0pt;}
 /* Page Definitions */
 @page WordSection1
	{size:595.0pt 842.0pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ZH-CN link="#000000" vlink=fuchsia style='word-wrap:break-word'>

<div class=WordSection1>

<p class=A align=right style='margin-bottom:10.5pt;text-align:right;text-indent:
5.0pt;line-height:120%'><span lang=EN-US style='font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=1 style='line-height:120%'><span lang=EN-US>&nbsp;</span></p>

<div>

<table cellspacing=0 cellpadding=0 hspace=0 vspace=0 align=left>
 <tr>
  <td valign=top align=left style='padding-top:0cm;padding-right:0cm;
  padding-bottom:0cm;padding-left:0cm'>
  <p class=A style='line-height:120%'><span lang=EN-US>&nbsp;</span></p>
  <p class=A style='line-height:120%'><span lang=EN-US>&nbsp;</span></p>
  <p class=A style='line-height:120%'><span lang=EN-US>&nbsp;</span></p>
  <p class=A style='line-height:120%'><span lang=EN-US>&nbsp;</span></p>
  <p class=A style='line-height:120%'><span lang=EN-US>&nbsp;</span></p>
  <p class=A style='line-height:120%'><span lang=EN-US>&nbsp;</span></p>
  <p class=A style='line-height:120%'><span lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
</table>

</div>

<p class=1 style='line-height:120%'><span lang=EN-US>&nbsp;</span></p>

<p class=1 align=center style='text-align:center;line-height:120%'><b><span
lang=EN-US style='font-size:26.0pt;line-height:120%;color:#3F3F3F'>seata</span></b><b><span
style='font-size:26.0pt;line-height:120%;color:#3F3F3F'>集成说明书</span></b></p>

<p class=A align=left style='margin-bottom:10.5pt;text-align:left;text-indent:
9.0pt;line-height:120%'><span lang=ZH-TW style='font-size:18.0pt;line-height:
120%;font-family:"微软雅黑",sans-serif;color:#4F81BD;text-transform:uppercase'>                                                           </span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW style='font-size:18.0pt;
line-height:120%;font-family:"微软雅黑",sans-serif;color:#4F81BD;text-transform:
uppercase'>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW style='font-size:18.0pt;
line-height:120%;font-family:"微软雅黑",sans-serif;color:#4F81BD;text-transform:
uppercase'>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW style='font-size:18.0pt;
line-height:120%;font-family:"微软雅黑",sans-serif;color:#4F81BD;text-transform:
uppercase'>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW style='font-size:18.0pt;
line-height:120%;font-family:"微软雅黑",sans-serif;color:#4F81BD;text-transform:
uppercase'>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW>&nbsp;</span></p>

<p class=A align=center style='margin-bottom:10.5pt;text-align:center;
text-indent:9.0pt;line-height:120%'><span lang=ZH-TW>&nbsp;</span></p>

<div>

<table cellspacing=0 cellpadding=0 hspace=0 vspace=0 align=left>
 <tr>
  <td valign=top align=left style='padding-top:0cm;padding-right:0cm;
  padding-bottom:0cm;padding-left:0cm'>
  <p class=MsoNormal><a name="_Toc6840"><span lang=EN-US>&nbsp;</span></a></p>
  </td>
 </tr>
</table>

</div>

<div style='border:solid #D9D9D9 1.0pt;padding:5.0pt 5.0pt 5.0pt 5.0pt;
background:#D9D9D9;margin-left:21.25pt;margin-right:0cm'>

<p class=A align=center style='margin-top:20.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:0cm;text-align:center;text-indent:9.0pt;line-height:120%;
page-break-before:always;background:#D9D9D9;border:none;padding:0cm'><span
lang=EN-US>第1章<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><b><span
style='font-size:18.0pt;line-height:120%;font-family:"微软雅黑",sans-serif;
text-transform:uppercase'>目录</span></b><a name="_Toc479760759"></a></p>

</div>

<p class=MsoToc2><a
href="#_Toc27778"><span lang=EN-US style='layout-grid-mode:line;text-decoration:
none'>2.1 </span><span lang=EN-US style='layout-grid-mode:line;text-decoration:
none'>读者对象</span></a></p>

<p class=MsoToc2><a href="#_Toc21784"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>2.2 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>预备知识</span></a></p>

<p class=MsoToc1><a href="#_Toc31040"><span style='text-decoration:none'>第</span><span
lang=EN-US style='font-family:"Arial",sans-serif;text-decoration:none'>3</span><span
style='text-decoration:none'>章</span><span style='font-family:"Arial",sans-serif;
text-decoration:none'> </span><span style='text-decoration:none'>前置条件</span></a></p>

<p class=MsoToc2><a href="#_Toc14267"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>3.1 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>适用场景</span></a></p>

<p class=MsoToc2><a href="#_Toc28000"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>3.2 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>适用版本</span></a></p>

<p class=MsoToc2><a href="#_Toc25444"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>3.3 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>下载地址</span></a></p>

<p class=MsoToc2><a href="#_Toc15858"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>3.4 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>准备脚本</span></a></p>

<p class=MsoToc1><a href="#_Toc13349"><span style='text-decoration:none'>第</span><span
lang=EN-US style='font-family:"Arial",sans-serif;text-decoration:none'>4</span><span
style='text-decoration:none'>章</span><span style='font-family:"Arial",sans-serif;
text-decoration:none'> </span><span style='text-decoration:none'>运维部署说明</span></a></p>

<p class=MsoToc2><a href="#_Toc19681"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>4.1 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>配置registry.conf</span></a></p>

<p class=MsoToc2><a href="#_Toc10720"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>4.2 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>配置file.conf</span></a></p>

<p class=MsoToc2><a href="#_Toc4542"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>4.3 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>配置nacos-config.txt</span></a></p>

<p class=MsoToc2><a href="#_Toc16456"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>4.4 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>执行nacos-config.sh</span></a></p>

<p class=MsoToc2><a href="#_Toc6698"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>4.5 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>执行数据库脚本</span></a></p>

<p class=MsoToc2><a href="#_Toc21554"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>4.6 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>启动seata</span></a></p>

<p class=MsoToc2><a href="#_Toc9854"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>4.7 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>启动微服务</span></a></p>

<p class=MsoToc1><a href="#_Toc26658"><span style='text-decoration:none'>第</span><span
lang=EN-US style='font-family:"Arial",sans-serif;text-decoration:none'>5</span><span
style='text-decoration:none'>章</span><span style='font-family:"Arial",sans-serif;
text-decoration:none'> </span><span style='text-decoration:none'>程序集成说明</span></a></p>

<p class=MsoToc2><a href="#_Toc3215"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>5.1 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>程序集成参考工程</span></a></p>

<p class=MsoToc2><a href="#_Toc27246"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>5.2 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>检查pom.xml引入包</span></a></p>

<p class=MsoToc2><a href="#_Toc6601"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>5.3 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>检查数据源DruidConfig配置代理</span></a></p>

<p class=MsoToc2><a href="#_Toc29055"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>5.4 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>检查registry.conf</span></a></p>

<p class=MsoToc2><a href="#_Toc14073"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>5.5 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>检查配置bootstrap.properties的seata配置</span></a></p>

<p class=MsoToc2><a href="#_Toc18152"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>5.6 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>检查配置nacos的seata配置</span></a></p>

<p class=MsoToc2><a href="#_Toc25461"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>5.7 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>检查启动类Application初始化参数</span></a></p>

<p class=MsoToc2><a href="#_Toc8304"><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>5.8 </span><span lang=EN-US style='layout-grid-mode:
line;text-decoration:none'>使用分布式事务</span><span lang=EN-US style='text-decoration:
none'>GlobalTransactional</span></a></p>

<div style='border:solid #D9D9D9 1.0pt;padding:5.0pt 5.0pt 5.0pt 5.0pt;
background:#D9D9D9;margin-left:21.25pt;margin-right:0cm'>

<p class=A align=center style='margin-top:20.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:0cm;text-align:center;text-indent:9.0pt;line-height:120%;
page-break-before:always;background:#D9D9D9;border:none;padding:0cm'><span
lang=EN-US>第2章<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>引言</span></p>

</div>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc7636"></a><a name="_Toc27778"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>读者对象</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>本文描述了数字化运营平台分布式事务<span
lang=EN-US>seata</span>集成部署与集成，预期读者为运维人员，开发人员。</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc479760760"></a><a name="_Toc479604937"></a><a name="_Toc26762"></a><a
name="_Toc21784"><span lang=EN-US style='font-family:"微软雅黑",sans-serif;
layout-grid-mode:line'>2.2<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>预备知识</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>相关人员在进行使用时，必须先具备<span
lang=EN-US>springboot</span>，<span lang=EN-US>mysql</span>，分布式事务相关知识。</span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:120%'><span lang=ZH-TW style='font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.0pt;text-align:justify;
text-justify:inter-ideograph;text-indent:0cm;line-height:120%'><span
lang=ZH-TW style='font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.0pt;text-align:justify;
text-justify:inter-ideograph;text-indent:0cm;line-height:120%'><span
lang=ZH-TW style='font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.0pt;text-align:justify;
text-justify:inter-ideograph;text-indent:0cm;line-height:120%'><span
lang=ZH-TW style='font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.0pt;text-align:justify;
text-justify:inter-ideograph;text-indent:0cm;line-height:120%'><span
lang=ZH-TW style='font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.0pt;text-align:justify;
text-justify:inter-ideograph;text-indent:0cm;line-height:120%'><span
lang=ZH-TW style='font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid #D9D9D9 1.0pt;padding:5.0pt 5.0pt 5.0pt 5.0pt;
background:#D9D9D9'>

<h1 style='margin-top:20.0pt;margin-right:0cm;margin-bottom:6.0pt;margin-left:
21.25pt;text-align:justify;text-justify:inter-ideograph;line-height:normal;
page-break-before:always;background:#D9D9D9;border:none;padding:0cm'><a
name="_Toc696"></a><a name="_Toc31040"><span lang=EN-US style='font-family:
"Arial",sans-serif'>第3章<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;color:black'>前置条件</span></a></h1>

</div>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc8686"></a><a name="_Toc14267"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>3.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>适用场景</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>Seata
</span><span style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>是一款开源的分布式事务解决方案。<span
lang=EN-US>Seata</span>可集成<span lang=EN-US>nacos</span>配置。</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc9464"></a><a name="_Toc28000"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>3.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>适用版本</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>Seata0.8.0</span><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>版本。</span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:120%'><span lang=EN-US style='font-size:10.0pt;line-height:120%;
font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc15370"></a><a name="_Toc25444"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>3.3<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>下载地址</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>https://seata.io/zh-cn/blog/download.html</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc4020"></a><a name="_Toc15858"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>3.4<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>准备脚本</span></a></h2>

<p class=MsoListParagraph style='margin-left:65.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:-21.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:Wingdings'>Ø<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>每个微服务数据库执行<span
lang=EN-US>undo_log</span>表脚本</span></p>

<p class=MsoListParagraph style='margin-left:65.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:-21.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:Wingdings'>Ø<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>db_store.sql</span><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>数据库脚本</span></p>

<p class=MsoListParagraph style='margin-left:65.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:0cm;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:65.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:0cm;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid #D9D9D9 1.0pt;padding:5.0pt 5.0pt 5.0pt 5.0pt;
background:#D9D9D9'>

<h1 style='margin-top:20.0pt;margin-right:0cm;margin-bottom:6.0pt;margin-left:
21.25pt;text-align:justify;text-justify:inter-ideograph;line-height:normal;
page-break-before:always;background:#D9D9D9;border:none;padding:0cm'><a
name="_Toc486001972"></a><a name="_Toc7620"></a><a name="_Toc13349"><span
lang=EN-US style='font-family:"Arial",sans-serif'>第4章<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;color:black'>运维部署说明</span></a></h1>

</div>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc7518"></a><a name="_Toc19681"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>4.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>配置<span
lang=EN-US>registry.conf</span></span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><a
name="_Toc486001974"><span style='font-size:10.0pt;line-height:120%;font-family:
"微软雅黑",sans-serif'>配置<span lang=EN-US>seata-server\conf\ registry.conf</span>的<span
lang=EN-US>nacos</span>地址</span></a></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>registry
{</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  #
file </span><span lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;
color:black'>、</span><span lang=EN-US style='font-size:9.0pt;color:black'>nacos
</span><span lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;
color:black'>、</span><span lang=EN-US style='font-size:9.0pt;color:black'>eureka</span><span
lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>redis</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>zk</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>consul</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>etcd3</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>sofa</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  type
= </span><span lang=EN-US style='font-size:9.0pt;color:red'>&quot;nacos&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
nacos {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
serverAddr = &quot;</span><span lang=EN-US style='font-size:9.0pt;color:red'>10.0.4.79:8848&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
namespace = &quot;public&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
cluster = &quot;default&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>}</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>config
{</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  #
file</span><span lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;
color:black'>、</span><span lang=EN-US style='font-size:9.0pt;color:black'>nacos
</span><span lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;
color:black'>、</span><span lang=EN-US style='font-size:9.0pt;color:black'>apollo</span><span
lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>zk</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>consul</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>etcd3</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  type
= &quot;</span><span lang=EN-US style='font-size:9.0pt;color:red'>nacos</span><span
lang=EN-US style='font-size:9.0pt;color:black'>&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
nacos {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
serverAddr = &quot;</span><span lang=EN-US style='font-size:9.0pt;color:red'>10.0.4.79:8848</span><span
lang=EN-US style='font-size:9.0pt;color:black'>&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
namespace = &quot;public&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
cluster = &quot;default&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：</span><span lang=EN-US>ip :port</span><span
style='font-family:"微软雅黑",sans-serif'>，</span><span lang=EN-US>ip :port</span><span
style='font-family:"微软雅黑",sans-serif'>格式</span></p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc4703"></a><a name="_Toc10720"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>4.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>配置<span
lang=EN-US>file.conf</span></span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>配置<span
lang=EN-US>seata-server\conf\ file.conf</span>的<span lang=EN-US>seate</span>启动地址列表</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>service
{</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
#vgroup-&gt;rgroup</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
vgroup_mapping.my_test_tx_group = &quot;default&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
#only support single node</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> </span><span
lang=EN-US style='font-size:9.0pt;color:red'> default.grouplist =
&quot;10.0.4.79:8091&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
#degrade current not support</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
enableDegrade = false</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
#disable</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
disable = false</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
#unit ms,s,m,h,d represents milliseconds, seconds, minutes, hours, days,
default permanent</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
max.commit.retry.timeout = &quot;-1&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
max.rollback.retry.timeout = &quot;-1&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：</span><span lang=EN-US>ip :port</span><span
style='font-family:"微软雅黑",sans-serif'>，</span><span lang=EN-US>ip :port</span><span
style='font-family:"微软雅黑",sans-serif'>格式</span></p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc17500"></a><a name="_Toc4542"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>4.3<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>配置<span
lang=EN-US>nacos-config.txt</span></span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>配置<span
lang=EN-US>seata-server\conf\ nacos-config.txt</span>的参数</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.type=TCP</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.server=NIO</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.heartbeat=true</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.thread-factory.boss-thread-prefix=NettyBoss</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.thread-factory.worker-thread-prefix=NettyServerNIOWorker</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.thread-factory.server-executor-thread-prefix=NettyServerBizHandler</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.thread-factory.share-boss-worker=false</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.thread-factory.client-selector-thread-prefix=NettyClientSelector</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.thread-factory.client-selector-thread-size=1</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.thread-factory.client-worker-thread-prefix=NettyClientWorkerThread</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.thread-factory.boss-thread-size=1</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.thread-factory.worker-thread-size=8</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.shutdown.wait=3</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:red'>service.vgroup_mapping.module-service-consumer-seata=default</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:red'>service.vgroup_mapping.module-service-provider-seata=default</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>service.enableDegrade=false</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>service.disable=false</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>service.max.commit.retry.timeout=-1</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>service.max.rollback.retry.timeout=-1</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>client.async.commit.buffer.limit=10000</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>client.lock.retry.internal=10</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>client.lock.retry.times=30</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:red'>store.mode=db</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.file.dir=file_store/data</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.file.max-branch-session-size=16384</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.file.max-global-session-size=512</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.file.file-write-buffer-cache-size=16384</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.file.flush-disk-mode=async</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.file.session.reload.read_size=100</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.db.datasource=dbcp</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.db.db-type=mysql</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.db.driver-class-name=com.mysql.jdbc.Driver</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:red'>store.db.url=jdbc:mysql://10.0.4.79:13306/seata?useUnicode=true</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:red'>store.db.user=root</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:red'>store.db.password=yda#121@11</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.db.min-conn=1</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.db.max-conn=3</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.db.global.table=global_table</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.db.branch.table=branch_table</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.db.query-limit=100</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>store.db.lock-table=lock_table</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>recovery.committing-retry-period=1000</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>recovery.asyn-committing-retry-period=1000</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>recovery.rollbacking-retry-period=1000</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>recovery.timeout-retry-period=1000</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transaction.undo.data.validation=true</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transaction.undo.log.serialization=jackson</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transaction.undo.log.save.days=7</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transaction.undo.log.delete.period=86400000</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transaction.undo.log.table=undo_log</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.serialization=seata</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>transport.compressor=none</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>metrics.enabled=false</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>metrics.registry-type=compact</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>metrics.exporter-list=prometheus</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>metrics.exporter-prometheus-port=9898</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：</span><span lang=EN-US>service.vgroup_mapping.xxx=default</span><span
style='font-family:"微软雅黑",sans-serif'>中的</span><span lang=EN-US>xxx</span><span
style='font-family:"微软雅黑",sans-serif'>为</span><span lang=EN-US>springboot</span><span
style='font-family:"微软雅黑",sans-serif'>程序的</span><span lang=EN-US>seata.tx-service-group</span><span
style='font-family:"微软雅黑",sans-serif'>的</span><span lang=EN-US>value</span></p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc30231"></a><a name="_Toc16456"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>4.4<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>执行<span
lang=EN-US>nacos-config.sh</span></span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>执行<span
lang=EN-US>seata-server\conf\ nacos-config.sh</span>的参数</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>./nacos-config.sh
10.0.4.79</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：</span><span lang=EN-US>./nacos-config.sh 
nacos</span><span style='font-family:"微软雅黑",sans-serif'>的</span><span
lang=EN-US>ip:port </span><span style='font-family:"微软雅黑",sans-serif'>格式</span></p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>可以查看<span
lang=EN-US>nacos</span>的生产配置</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'><img
border=0 width=554 height=246 id="图片 1" src="seata.files/image001.gif"></span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：检查</span><span lang=EN-US>nacos</span><span
style='font-family:"微软雅黑",sans-serif'>配置中的</span><span lang=EN-US>store.db.password</span><span
style='font-family:"微软雅黑",sans-serif'>是正确</span> </p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc22973"></a><a name="_Toc6698"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>4.5<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>执行数据库脚本</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>执行<span
lang=EN-US>seata-server\conf\</span>的<span lang=EN-US>db_store.sql</span>，<span
lang=EN-US>db_undo_log.sql</span></span></p>

<p class=MsoListParagraph style='margin-left:65.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:-21.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:Wingdings'>Ø<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>每个微服务的数据库（<span
lang=EN-US>ocss</span>）执行<span lang=EN-US>undo_log</span>表脚本</span></p>

<p class=MsoListParagraph style='margin-left:65.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:-21.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:Wingdings'>Ø<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>db_store.sql</span><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>数据库脚本</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：</span><span lang=EN-US> </span><span
style='font-family:"微软雅黑",sans-serif'>每个微服务数据库执行</span><span lang=EN-US>undo_log</span><span
style='font-family:"微软雅黑",sans-serif'>表脚本</span></p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc5240"></a><a name="_Toc21554"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>4.6<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>启动<span
lang=EN-US>seata</span></span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>执行<span
lang=EN-US>seata-server\bin\ seata-server.sh</span></span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>nohup
sh ./seata-server.sh -p 8091 -h 10.0.4.79 -m db -n 1 &gt;log.out 2&gt;1 &amp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：</span><span lang=EN-US>-p</span><span
style='font-family:"微软雅黑",sans-serif'>端口，</span><span lang=EN-US>-h</span><span
style='font-family:"微软雅黑",sans-serif'>地址</span> </p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc687"></a><a name="_Toc9854"><span lang=EN-US style='font-family:"微软雅黑",sans-serif;
layout-grid-mode:line'>4.7<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>启动微服务</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>执行<span
lang=EN-US>java -jar </span>命令，如下</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>java
-jar module-service-consumer-6.0.0-SNAPSHOT.jar
--spring.cloud.nacos.config.server-addr=10.0.4.79:8848</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：通过</span><span lang=EN-US
style='font-size:9.0pt'>spring.cloud.nacos.config.server-addr</span><span
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif'>自动配置了</span><span
lang=EN-US style='font-size:9.0pt'>seata</span><span style='font-size:9.0pt;
font-family:"微软雅黑",sans-serif'>的</span><span lang=EN-US style='font-size:9.0pt'>nacos</span><span
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif'>地址</span> </p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid #D9D9D9 1.0pt;padding:5.0pt 5.0pt 5.0pt 5.0pt;
background:#D9D9D9'>

<h1 style='margin-top:20.0pt;margin-right:0cm;margin-bottom:6.0pt;margin-left:
21.25pt;text-align:justify;text-justify:inter-ideograph;line-height:normal;
page-break-before:always;background:#D9D9D9;border:none;padding:0cm'><a
name="_Toc11905"></a><a name="_Toc26658"><span lang=EN-US style='font-family:
"Arial",sans-serif'>第5章<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;color:black'>程序集成说明</span></a></h1>

</div>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc4762"></a><a name="_Toc3215"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>5.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>程序集成参考工程</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>参考工程<span
lang=EN-US>template\</span></span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>module-service-consumer</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>module-service-consumer</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc3796"></a><a name="_Toc27246"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>5.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>检查<span
lang=EN-US>pom.xml</span>引入包</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>检查<span
lang=EN-US>pom.xml</span>或者依赖的<span lang=EN-US>consumer-dependence</span>，<span
lang=EN-US>provider-dependence</span>的<span lang=EN-US>pom.xml</span></span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>&lt;dependency&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>           
&lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>           
&lt;artifactId&gt;spring-cloud-alibaba-seata&lt;/artifactId&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>       
&lt;/dependency&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>       
&lt;dependency&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>        
&lt;groupId&gt;io.seata&lt;/groupId&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>        
&lt;artifactId&gt;seata-spring-boot-starter&lt;/artifactId&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      &lt;/dependency&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>       
&lt;dependency&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>           
&lt;groupId&gt;io.seata&lt;/groupId&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>           
&lt;artifactId&gt;seata-all&lt;/artifactId&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>         
</span><span lang=EN-US style='font-size:9.0pt;color:red'>  &lt;version&gt;0.8.0&lt;/version&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>       
&lt;/dependency&gt;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：注意必须是</span><span lang=EN-US>0.8.0</span><span
style='font-family:"微软雅黑",sans-serif'>版本</span></p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc17157"></a><a name="_Toc6601"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>5.3<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>检查数据源<span
lang=EN-US>DruidConfig</span>配置代理</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>检查<span
lang=EN-US>/com/yunbiaokj/module/service/provider/config/DruidConfig.java</span></span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>@Bean</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>     
public SqlSessionTemplate sqlSessionTemplate(SqlSessionFactory
sqlSessionFactory) {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>         
return new SqlSessionTemplate(sqlSessionFactory);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>     
}</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>    </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>    </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>     
@Primary</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>     
@Bean</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>     
public DataSourceProxy dataSourceProxy(DataSource druidDataSource) {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>         
return new DataSourceProxy(druidDataSource);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>     
}</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>     
@Bean</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>     
public SqlSessionFactory sqlSessionFactoryBean(DataSourceProxy dataSourceProxy)
throws Exception {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>         
MybatisSqlSessionFactoryBean bean = new MybatisSqlSessionFactoryBean();</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>         
bean.setDataSource(dataSourceProxy);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>         
ResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>        
// bean.setConfigLocation(resolver.getResource(&quot;classpath:mybatis-config.xml&quot;));</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>        
bean.setMapperLocations(resolver.getResources(&quot;</span><span lang=EN-US
style='font-size:9.0pt;color:red'>classpath*:mapper/**/*Mapper.xml</span><span
lang=EN-US style='font-size:9.0pt;color:black'>&quot;));</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>         
SqlSessionFactory factory = null;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>         
try {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>             
factory = bean.getObject();</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>         
} catch (Exception e) {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>             
throw new RuntimeException(e);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>         
}</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>         
return factory;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>     
}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：注意</span><span lang=EN-US>mapper</span><span
style='font-family:"微软雅黑",sans-serif'>文件必须能扫描到</span></p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc1159"></a><a name="_Toc29055"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>5.4<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>检查<span
lang=EN-US>registry.conf</span></span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>检查<span
lang=EN-US>/src/main/resources/ registry.conf</span></span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>registry
{</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  #
file </span><span lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;
color:black'>、</span><span lang=EN-US style='font-size:9.0pt;color:black'>nacos
</span><span lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;
color:black'>、</span><span lang=EN-US style='font-size:9.0pt;color:black'>eureka</span><span
lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>redis</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>zk</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>consul</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>etcd3</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>sofa</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  type
= </span><span lang=EN-US style='font-size:9.0pt;color:red'>&quot;nacos&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
nacos {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
#serverAddr = &quot;</span><span lang=EN-US style='font-size:9.0pt;color:red'>10.0.4.79:8848&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
namespace = &quot;public&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
cluster = &quot;default&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>}</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>config
{</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  #
file</span><span lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;
color:black'>、</span><span lang=EN-US style='font-size:9.0pt;color:black'>nacos
</span><span lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;
color:black'>、</span><span lang=EN-US style='font-size:9.0pt;color:black'>apollo</span><span
lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>zk</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>consul</span><span lang=AR-SA
style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:black'>、</span><span
lang=EN-US style='font-size:9.0pt;color:black'>etcd3</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  type
= &quot;</span><span lang=EN-US style='font-size:9.0pt;color:red'>nacos</span><span
lang=EN-US style='font-size:9.0pt;color:black'>&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> 
nacos {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
#serverAddr = &quot;</span><span lang=EN-US style='font-size:9.0pt;color:red'>10.0.4.79:8848</span><span
lang=EN-US style='font-size:9.0pt;color:black'>&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
namespace = &quot;public&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
cluster = &quot;default&quot;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>}</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:24.1pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:25.2pt;line-height:120%'><span lang=EN-US
style='font-family:Wingdings'>è<span style='font:7.0pt "Times New Roman"'> </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：</span><span lang=EN-US>#serverAddr</span><span
style='font-family:"微软雅黑",sans-serif'>必须注释掉</span> </p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc23473"></a><a name="_Toc14073"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>5.5<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>检查配置<span
lang=EN-US>bootstrap.properties</span>的<span lang=EN-US>seata</span>配置</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>配置<span
lang=EN-US>/src/main/resources/</span></span><span lang=EN-US> </span><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>bootstrap.properties</span><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>的<span
lang=EN-US>seata.tx-service-group</span></span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>spring.cloud.alibaba.seata.tx-service-group=</span><span
lang=EN-US style='font-size:9.0pt;color:red'>module-service-consumer-seata  </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：配置</span><span lang=EN-US
style='font-family:"微软雅黑",sans-serif'>seata.tx-service-group</span></p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc8527"></a><a name="_Toc18152"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>5.6<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>检查配置<span
lang=EN-US>nacos</span>的<span lang=EN-US>seata</span>配置</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>配置<span
lang=EN-US>/src/main/resources/</span></span><span lang=EN-US> </span><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>bootstrap.properties</span><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>的<span
lang=EN-US>seata.tx-service-group</span></span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'><img border=0 width=501
height=386 id="图片 4" src="seata.files/image002.gif"></span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：配置</span><span lang=EN-US>dataId</span><span
style='font-family:"微软雅黑",sans-serif'>的</span><span lang=EN-US
style='font-family:"微软雅黑",sans-serif'>service.vgroup_mapping.xxx</span><span
style='font-family:"微软雅黑",sans-serif'>中的<span lang=EN-US>xxx</span>为<span
lang=EN-US>bootstrap.properties</span>的<span lang=EN-US>seata.tx-service-group</span>的值</span></p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc21652"></a><a name="_Toc25461"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>5.7<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>检查启动类<span
lang=EN-US>Application</span>初始化参数</span></a></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>检查<span
lang=EN-US>com/yunbiaokj/module/service/provider/ServiceProviderApplication.java</span></span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>@SpringBootApplication</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>@EnableDiscoveryClient</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>@ComponentScan(basePackages
= {&quot;com.yunbiaokj.module.service.consumer&quot;,
&quot;com.yunbiaokj.common.mq&quot;, &quot;com.yunbiaokj.common.session&quot;})</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>public
class ServiceConsumerApplication {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
public static void main(String[] args) throws IOException {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      </span><span
lang=EN-US style='font-size:9.0pt;color:red'>initCommand( args);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>       
SpringApplication.run(ServiceConsumerApplication.class, args);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>    }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>    </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
private static void initCommand(String[] args) throws IOException{</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      setProperty(args,&quot;serverAddr&quot;,&quot;spring.cloud.nacos.config.server-addr&quot;);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      setProperty(args,&quot;namespace&quot;,&quot;spring.cloud.nacos.discovery.namespace&quot;);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>    </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
private static void  setProperty(String[] args,String propertyKey,String
commandKey) throws IOException{</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      Optional&lt;String&gt;
serverAddrValueOptional = Arrays.stream(args).filter(str -&gt;
str.contains(commandKey) ).findFirst();</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      System.setProperty(propertyKey,
serverAddrValueOptional.isPresent()?serverAddrValueOptional.get().split(&quot;=&quot;)[1]:getPropertiesValue(commandKey));</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>    }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  private
static String getPropertiesValue(String key) throws IOException{</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>       return
PropertiesLoaderUtils.loadAllProperties(&quot;bootstrap.properties&quot;).getProperty(key);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>} </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>}</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：注意必须通过</span><span lang=EN-US>initCommand</span><span
style='font-family:"微软雅黑",sans-serif'>（）方法进行初始化</span></p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<h2 align=left style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:left;text-indent:0cm;line-height:normal'><a
name="_Toc15892"></a><a name="_Toc8304"><span lang=EN-US style='font-family:
"微软雅黑",sans-serif;layout-grid-mode:line'>5.8<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑",sans-serif;layout-grid-mode:line'>使用分布式事务</span></a><span
lang=EN-US style='font-size:10.0pt;font-family:"微软雅黑",sans-serif'>GlobalTransactional</span></h2>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>检查消费者添加<span
lang=EN-US>GlobalTransactional</span>注解</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>/com/yunbiaokj/module/service/consumer/controller/SeataController.java</span><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>例子如下</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>@RequestMapping(value
= &quot;/module/service&quot;)  </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>@RestController</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>public
class SeataController {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
@Autowired</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
private  RestTemplate restTemplate;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>    </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> </span><span
lang=EN-US style='font-size:9.0pt;color:red'>   @GlobalTransactional(timeoutMills
= 300000, name = &quot;SeataController-seata&quot;)</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
@Transactional(rollbackFor = Exception.class)</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
@RequestMapping(value = &quot;/seata/{id}&quot;, method = RequestMethod.GET)</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
public String seata(@PathVariable Long id) {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      String
r1 =
restTemplate.getForObject(&quot;http://module-service-provider/module/seata/del1/&quot;+(id-1)
, </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>              String.class);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      System.out.println(&quot;r1
&quot; +r1 );</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      String
r2
=restTemplate.getForObject(&quot;http://module-service-provider/module/seata/del2/&quot;+id
,</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>              String.class);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      
   System.out.println(&quot;r2 &quot; +r2 );</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>       
return r1 +&quot; &quot; + r2;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>    }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>}</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：注意必须</span><span lang=EN-US
style='font-family:"微软雅黑",sans-serif'>GlobalTransactional</span><span
style='font-family:"微软雅黑",sans-serif'>注解</span></p>

</div>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>检查消费者添加<span
lang=EN-US>RootContext.getXID()</span></span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>/com/yunbiaokj/module/service/provider/controller/SeataController.java</span><span
style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>例子如下</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>@RequestMapping(value
= &quot;/module/seata&quot;) </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>@RestController</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>public
class SeataController {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  @Autowired</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  private
HotelService hotelService;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
//@Transactional // </span><span lang=AR-SA style='font-size:9.0pt;font-family:
"微软雅黑",sans-serif;color:black'>开启新事物</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  @GetMapping(&quot;/del1/{id}&quot;)</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  public
String seata(@PathVariable(name=&quot;id&quot;) Long id) </span><span
lang=EN-US style='font-size:9.0pt;color:red'>throws Exception {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>    </span><span
lang=EN-US style='font-size:9.0pt;color:red'>  System.out.println(&quot;[seata]
</span><span lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;
color:red'>当前</span><span lang=EN-US style='font-size:9.0pt;color:red'> XID:
&quot;+ RootContext.getXID());</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      System.out.println(&quot;SeataController
seata  id &quot; +id);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      //return
hotelService.selectByCityId(id);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      if
(hotelService.selectByCityId(id)==null) {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>           
throw new Exception(&quot;</span><span lang=AR-SA style='font-size:9.0pt;
font-family:"微软雅黑",sans-serif;color:black'>数据不存在</span><span lang=EN-US
style='font-size:9.0pt;color:black'>&quot;);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      hotelService.deleteByCityId(id);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      return
id +&quot; is delete&quot;;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
//@Transactional // </span><span lang=AR-SA style='font-size:9.0pt;font-family:
"微软雅黑",sans-serif;color:black'>开启新事物</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   
@GetMapping(&quot;/del2/{id}&quot;)</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  public
String seata2(@PathVariable(name=&quot;id&quot;) Long id) </span><span
lang=EN-US style='font-size:9.0pt;color:red'>throws Exception{</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      </span><span
lang=EN-US style='font-size:9.0pt;color:red'>System.out.println(&quot;[seata2] </span><span
lang=AR-SA style='font-size:9.0pt;font-family:"微软雅黑",sans-serif;color:red'>当前</span><span
lang=EN-US style='font-size:9.0pt;color:red'> XID: &quot;+
RootContext.getXID());</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      System.out.println(&quot;SeataController
seata2  id &quot; +id);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      if
(hotelService.selectByCityId(id)==null) {</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>           
throw new Exception(&quot;</span><span lang=AR-SA style='font-size:9.0pt;
font-family:"微软雅黑",sans-serif;color:black'>数据不存在</span><span lang=EN-US
style='font-size:9.0pt;color:black'>&quot;);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      hotelService.deleteByCityId(id);</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>      return
id +&quot; is delete&quot;;</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>  }</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>}</span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'> </span></p>

<p class=COR- style='margin-top:7.8pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:50.4pt'><span lang=EN-US style='font-size:9.0pt;color:black'>   </span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:24.1pt;text-align:justify;
text-justify:inter-ideograph;text-indent:20.0pt;line-height:120%'><span
lang=EN-US style='font-size:10.0pt;line-height:120%;font-family:"微软雅黑",sans-serif'>&nbsp;</span></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=COR-0 style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US style='font-family:
Wingdings'>è<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑",sans-serif'>注意：注意消费者能否获取</span><span lang=EN-US
style='font-family:"微软雅黑",sans-serif'>RootContext.getXID()</span><span
style='font-family:"微软雅黑",sans-serif'>，并且</span><span style='font-family:"微软雅黑",sans-serif'>能抛出</span><span
lang=EN-US>throws Exception</span><span style='font-family:"微软雅黑",sans-serif'>才能实现分布式事务</span></p>

</div>

</div>

</body>

</html>
